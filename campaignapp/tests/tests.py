import pytest
import json
import requests

def test_get_all_campaign():
    response = requests.get("http://127.0.0.1:8000/campaignapp/allcampaign")
    expected_result = {"result": [{"name": "campaign 1", "start_time": "2023-01-05 00:00:00+00:00", "end_time": "2023-01-07 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "desc", "banner": "banner", "final_url": "url", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 1}, {"name": "campaign 2", "start_time": "2023-01-05 00:00:00+00:00", "end_time": "2023-01-07 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "desc", "banner": "banner", "final_url": "url", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 1}, {"name": "campaign 3", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 4", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 1}, {"name": "campaign 5", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 1}, {"name": "campaign 6", "start_time": "2017-09-15 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title eidted 4", "description": "campaign 6 description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 7", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 8", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 9", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 10", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 10 11", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 12", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 13", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}]}
    actual_result = response.json()
    assert actual_result == expected_result

def test_get_campaign_by_user():
    response = requests.get("http://127.0.0.1:8000/campaignapp/campaignbyuserid/2")
    expected_result = {"result": [{"name": "campaign 3", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 6", "start_time": "2017-09-15 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title eidted 4", "description": "campaign 6 description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 7", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 8", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 9", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 10", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 10 11", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 12", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}, {"name": "campaign 13", "start_time": "2017-09-29 00:00:00+00:00", "end_time": "2017-10-30 00:00:00+00:00", "budget": 10000, "bid_amount": 10, "title": "campaign title", "description": "campaign description", "banner": "banner", "final_url": "https://www.youtube.com", "used_amount": "0.00", "usage_rate": "0.00", "user_id": 2}]}
    actual_result = response.json()
    assert actual_result == expected_result
